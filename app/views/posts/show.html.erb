<h1>投稿詳細</h1>

<div class="row">
	<div class="col-xs-3 user-profile">
		<%= render "users/profile", user: @post.user %>
	</div>

	<div class="col-xs-6">
		<div>
			<span><%= @post.title %></span>
			<span><%= @post.tag.tag_name%></span>
			<span><%= l @post.created_at%></span>
			<span><% if @post.liked_by?(current_user) %>
					<%= link_to post_like_path(@post), method: :delete do %>
						<i class="fa fa-heart" aria-hidden= "true" style="color: red;"></i>
					<% end %>
						<%= @post.likes.count %> いいね
					<% else %>
						<%= link_to post_likes_path(@post), method: :post do %>
							<i class="fa fa-heart" aria-hidden= "true"></i>
						<% end %>
						<%= @post.likes.count %> いいね
					<% end %>
			</span>
			<span>コメント数：<%= @post.post_comments.count %></span>
		</div>

		<div>
			<%= image_tag @post.image.url, class:"post-show-image" %>
		</div>

		<% if @post.video? %>
			<div>
				<%= video_tag @post.video, controls: true, class:"post-show-video" %>
			</div>
		<% end %>

		<div><%= @post.body %></div>

		<div>
			<%= form_for [@post, @post_comment] do |f| %>
				<%= f.text_area :comment, placeholder: "コメントをここに記入!" %>
				<%= f.submit "コメントする" %>
			<% end %>
		</div>

		<div>
			<% @post_comments.each do |post_comment| %>
				<div><%= post_comment.user.nickname %>
					<%= l post_comment.created_at %></div>
				<div><%= post_comment.comment %>
					<% if post_comment.user == current_user %>
						<%= link_to "削除", post_post_comment_path(post_comment.id), method: :delete, data: { confirm: '本当に削除しますか？' }, class:"btn btn-danger"%>
					<% end %>
				</div>
			<% end %>
		</div>

	</div>
</div>
